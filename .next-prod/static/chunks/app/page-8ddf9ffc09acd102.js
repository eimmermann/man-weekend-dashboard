(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{594:(e,t,a)=>{Promise.resolve().then(a.bind(a,9009)),Promise.resolve().then(a.bind(a,2273))},1950:(e,t,a)=>{"use strict";a.d(t,{MI:()=>c,NG:()=>d,Nn:()=>r,PJ:()=>o,QV:()=>i,Ub:()=>l,W5:()=>s});var n=a(9509);let r="2025-09-11T00:00:00-04:00",s="2025-09-15T23:59:59-04:00",i="Man Weekend 2025",l="15 Goldring Drive, Highland Lake, NY 12743",d="https://www.airbnb.com/rooms/880325538027550159?viralityEntryPoint=1&s=76";void 0!==n&&n.env.NEXT_PUBLIC_APP_NAME;let o="2025-09-11",c="2025-09-14"},2273:(e,t,a)=>{"use strict";a.d(t,{default:()=>E});var n=a(5155),r=a(2115),s=a(838),i=a(1950);let l=e=>fetch(e).then(e=>e.json());function d(){let{data:e,mutate:t,isLoading:a}=(0,s.Ay)("/api/attendees",l),[d,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[y,v]=(0,r.useState)(i.PJ),[j,w]=(0,r.useState)(i.MI),[k,N]=(0,r.useState)(!1),[z,C]=(0,r.useState)(null),[S,D]=(0,r.useState)(null),[A,T]=(0,r.useState)([]),[I,P]=(0,r.useState)(!1),[E,M]=(0,r.useState)(-1),[G,O]=(0,r.useState)(!1),L=(0,r.useRef)(null);function _(e){u(e.label),P(!1)}async function R(e){if(e.preventDefault(),d.trim()&&m.trim()){h(!0);try{await fetch("/api/attendees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,startingAddress:m,arrivalDate:y||void 0,departureDate:j||void 0})}),c(""),u(""),v(i.PJ),w(i.MI),T([]),P(!1),t(),N(!1)}finally{h(!1)}}}async function U(e){if(e){f(null),b(e);try{let a=await fetch("/api/attendees/".concat(e),{method:"DELETE"});if(!a.ok)return void(409===a.status?f("Cannot remove attendee: they are referenced by expenses."):404===a.status?f("Attendee not found."):f("Failed to remove attendee."));await t()}catch(e){f("Failed to remove attendee.")}finally{b(null),D(null)}}}return(0,r.useEffect)(()=>{if(m.trim().length<2){T([]),P(!1);return}let e=setTimeout(async()=>{try{var e;null==(e=L.current)||e.abort();let t=new AbortController;L.current=t,P(!0),O(!0);let a=await fetch("/api/geocode?q=".concat(encodeURIComponent(m),"&limit=10"),{signal:t.signal});if(!a.ok)return;let n=await a.json();T(n),P(!0),M(-1)}catch(e){}finally{O(!1)}},75);return()=>clearTimeout(e)},[m]),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Attendees"}),(0,n.jsx)("button",{type:"button",onClick:()=>N(!0),className:"text-xs rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5",children:"Join Man Weekend"})]}),g&&(0,n.jsx)("div",{className:"mt-3 text-sm text-rose-600 dark:text-rose-400",children:g}),(0,n.jsxs)("div",{className:"mt-4 divide-y divide-zinc-200 dark:divide-zinc-800",children:[a&&(0,n.jsx)("div",{className:"py-3 text-sm opacity-70",children:"Loading…"}),(null==e?void 0:e.length)?e.map(e=>(0,n.jsxs)("div",{className:"py-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)("div",{className:"text-xs opacity-70",children:(function(e){var t,a,n,r;if(!e)return[];let s=/\b\d{5}(?:-\d{4})?\b/,i=/\b([A-Z]{2})\b/,l={alabama:"AL",alaska:"AK",arizona:"AZ",arkansas:"AR",california:"CA",colorado:"CO",connecticut:"CT",delaware:"DE","district of columbia":"DC",florida:"FL",georgia:"GA",hawaii:"HI",idaho:"ID",illinois:"IL",indiana:"IN",iowa:"IA",kansas:"KS",kentucky:"KY",louisiana:"LA",maine:"ME",maryland:"MD",massachusetts:"MA",michigan:"MI",minnesota:"MN",mississippi:"MS",missouri:"MO",montana:"MT",nebraska:"NE",nevada:"NV","new hampshire":"NH","new jersey":"NJ","new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND",ohio:"OH",oklahoma:"OK",oregon:"OR",pennsylvania:"PA","rhode island":"RI","south carolina":"SC","south dakota":"SD",tennessee:"TN",texas:"TX",utah:"UT",vermont:"VT",virginia:"VA",washington:"WA","west virginia":"WV",wisconsin:"WI",wyoming:"WY"},d=e.split(",").map(e=>e.trim()).filter(Boolean).filter(e=>!/^(usa|united\s*states|us)$/i.test(e)&&!/county$/i.test(e)),o="",c=-1;d.forEach((e,t)=>{let a=e.match(s);a&&(o=a[0],c=t)});let m="";if(c>=0){let e=d[c].replace(s,"").trim()||d[c-1]||"",a=null==(t=e.match(i))?void 0:t[1];if(a)m=a.toUpperCase();else{let t=l[e.toLowerCase()];t&&(m=t)}}else for(let e=d.length-1;e>=0;e--){let t=d[e],n=null==(a=t.match(i))?void 0:a[1];if(n){m=n.toUpperCase(),c=e;break}let r=l[t.toLowerCase()];if(r){m=r,c=e;break}}let u=c>0?c-1:Math.max(0,d.length-2),p=d[u]||"",h=d.slice(0,u).map(e=>e.replace(s,"").trim()).filter(Boolean).join(", ").replace(/\s{2,}/g," ").trim(),x=[p,[m,o].filter(Boolean).join(" ")].filter(Boolean).join(", ").trim();if((!h||!x)&&d.length>=2){let e=d[d.length-2],t=d[d.length-1],a=(null==(n=t.match(s))?void 0:n[0])||o,l=[e,[((null==(r=t.match(i))?void 0:r[1])||m).toUpperCase(),a].filter(Boolean).join(" ")].filter(Boolean).join(", ");if(x||(x=l),!h){let e=d.slice(0,Math.max(0,d.length-2)).join(", ").replace(/\s{2,}/g," ").trim();e&&(h=e)}}let b=[];return h&&b.push(h),x&&b.push(x),b})(e.startingAddress).map((e,t)=>(0,n.jsx)("div",{children:e},t))}),(e.arrivalDate||e.departureDate)&&(0,n.jsxs)("div",{className:"mt-1 text-[11px] opacity-70",children:[e.arrivalDate?"Arrives ".concat((e.arrivalDate||"").slice(0,10)):"",e.arrivalDate&&e.departureDate?" • ":"",e.departureDate?"Departs ".concat((e.departureDate||"").slice(0,10)):""]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>C(e),title:"Edit attendee",className:"rounded-md border px-2 py-1 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/20 border-amber-300 dark:border-amber-800 text-amber-700 dark:text-amber-300","aria-label":"Edit ".concat(e.name),children:"✏️"}),(0,n.jsx)("button",{type:"button",onClick:()=>D({id:e.id,name:e.name}),disabled:x===e.id,title:"Remove attendee",className:"rounded-md border px-2 py-1 text-xs transition-colors ".concat(x===e.id?"opacity-50 cursor-not-allowed":"hover:bg-rose-50 dark:hover:bg-rose-900/20"," border-rose-300 dark:border-rose-800 text-rose-700 dark:text-rose-300"),"aria-label":"Remove ".concat(e.name),children:"\uD83D\uDDD1️"})]})]},e.id)):(0,n.jsx)("div",{className:"py-3 text-sm opacity-70",children:"No attendees yet"})]}),k&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!p&&N(!1)}),(0,n.jsxs)("div",{className:"relative z-[1001] w-[92%] max-w-md rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{className:"text-base font-semibold",children:"Join Man Weekend"}),(0,n.jsxs)("form",{onSubmit:R,className:"mt-4 grid grid-cols-1 gap-3",children:[(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Your name",value:d,onChange:e=>c(e.target.value)}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Arrival date",value:y,onChange:e=>v(e.target.value)}),(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Departure date",value:j,onChange:e=>w(e.target.value)})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Starting address",value:m,onChange:e=>u(e.target.value),onFocus:()=>A.length>0&&P(!0),onKeyDown:e=>{I&&("ArrowDown"===e.key&&(e.preventDefault(),M(e=>Math.min(e+1,A.length-1))),"ArrowUp"===e.key&&(e.preventDefault(),M(e=>Math.max(e-1,0))),"Enter"===e.key&&E>=0&&E<A.length&&(e.preventDefault(),_(A[E])),"Escape"===e.key&&P(!1))}}),I&&(0,n.jsxs)("div",{className:"absolute z-20 mt-1 w-full max-h-64 overflow-auto rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-lg",children:[G&&(0,n.jsx)("div",{className:"px-3 py-2 text-sm opacity-60",children:"Searching…"}),!G&&0===A.length&&(0,n.jsx)("div",{className:"px-3 py-2 text-sm opacity-60",children:"No matches"}),!G&&A.map((e,t)=>(0,n.jsx)("button",{type:"button",onClick:()=>_(e),className:"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 ".concat(t===E?"bg-zinc-50 dark:bg-zinc-800":""),children:e.label},e.id))]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",onClick:()=>N(!1),disabled:p,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:p,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:p?"Adding…":"Join"})]})]})]})]}),z&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!p&&C(null)}),(0,n.jsxs)("div",{className:"relative z-[1001] w-[92%] max-w-md rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{className:"text-base font-semibold",children:"Edit attendee"}),(0,n.jsx)(o,{attendee:z,onClose:()=>C(null),onSaved:()=>{t(),C(null)}})]})]}),S&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>x?null:D(null)}),(0,n.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"remove-attendee-title",className:"relative z-[1001] w-[92%] max-w-sm rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{id:"remove-attendee-title",className:"text-base font-semibold",children:"Remove attendee?"}),(0,n.jsxs)("p",{className:"mt-2 text-sm opacity-80",children:["Are you sure you want to remove ",(0,n.jsx)("span",{className:"font-medium",children:S.name}),"? This action cannot be undone."]}),(0,n.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>D(null),disabled:!!x,children:"Cancel"}),(0,n.jsx)("button",{type:"button",className:"rounded-md px-3 py-1.5 text-sm text-white ".concat(x?"bg-rose-500 opacity-70 cursor-not-allowed":"bg-rose-600 hover:bg-rose-500"),onClick:()=>U(S.id),disabled:!!x,children:x?"Removing…":"Remove"})]})]})]})]})}function o(e){let{attendee:t,onClose:a,onSaved:s}=e,[i,l]=(0,r.useState)(t.name),[d,o]=(0,r.useState)(t.startingAddress);function c(e){if(!e)return"";let t=String(e);if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;let a=new Date(t);return isNaN(a.getTime())?"":a.toISOString().slice(0,10)}let[m,u]=(0,r.useState)(()=>c(t.arrivalDate)),[p,h]=(0,r.useState)(()=>c(t.departureDate)),[x,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(-1),k=(0,r.useRef)(null);function N(e){o(e.label),v(!1)}async function z(e){if(e.preventDefault(),i.trim()&&d.trim()){b(!0);try{await fetch("/api/attendees/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,startingAddress:d,arrivalDate:m||void 0,departureDate:p||void 0})}),s()}finally{b(!1)}}}return(0,r.useEffect)(()=>{if(d.trim().length<2){f([]),v(!1);return}let e=setTimeout(async()=>{try{var e;null==(e=k.current)||e.abort();let t=new AbortController;k.current=t,v(!0);let a=await fetch("/api/geocode?q=".concat(encodeURIComponent(d),"&limit=10"),{signal:t.signal});if(!a.ok)return;let n=await a.json();f(n),w(-1)}catch(e){}},100);return()=>clearTimeout(e)},[d]),(0,n.jsxs)("form",{onSubmit:z,className:"mt-4 grid grid-cols-1 gap-3",children:[(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Name",value:i,onChange:e=>l(e.target.value)}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:m,onChange:e=>u(e.target.value)}),(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:p,onChange:e=>h(e.target.value)})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Starting address",value:d,onChange:e=>o(e.target.value),onFocus:()=>g.length>0&&v(!0),onKeyDown:e=>{y&&("ArrowDown"===e.key&&(e.preventDefault(),w(e=>Math.min(e+1,g.length-1))),"ArrowUp"===e.key&&(e.preventDefault(),w(e=>Math.max(e-1,0))),"Enter"===e.key&&j>=0&&j<g.length&&(e.preventDefault(),N(g[j])),"Escape"===e.key&&v(!1))}}),y&&g.length>0&&(0,n.jsx)("div",{className:"absolute z-20 mt-1 w-full max-h-64 overflow-auto rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-lg",children:g.map((e,t)=>(0,n.jsx)("button",{type:"button",onClick:()=>N(e),className:"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 ".concat(t===j?"bg-zinc-50 dark:bg-zinc-800":""),children:e.label},e.id))})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",onClick:a,disabled:x,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:x,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:x?"Saving…":"Save"})]})]})}function c(e,t){var a,n,r,s;e.map(e=>[e.id,e]);let i={totalSpend:0,perAttendeeOwes:new Map,perAttendeePaid:new Map};for(let t of e)i.perAttendeeOwes.set(t.id,0),i.perAttendeePaid.set(t.id,0);for(let r of t){i.totalSpend+=r.amount;let t=r.beneficiaryIds.length>0?r.beneficiaryIds:e.map(e=>e.id),s=t.length>0?r.amount/t.length:0;for(let e of(i.perAttendeePaid.set(r.payerId,(null!=(a=i.perAttendeePaid.get(r.payerId))?a:0)+r.amount),t))i.perAttendeeOwes.set(e,(null!=(n=i.perAttendeeOwes.get(e))?n:0)+s)}let l=new Map;for(let t of e){let e=null!=(r=i.perAttendeeOwes.get(t.id))?r:0,a=null!=(s=i.perAttendeePaid.get(t.id))?s:0;l.set(t.id,+(e-a).toFixed(2))}return{...i,perAttendeeNet:l}}let m=e=>fetch(e).then(e=>e.json());function u(){let{data:e=[],isLoading:t}=(0,s.Ay)("/api/attendees",m),{data:a=[],mutate:i,isLoading:l}=(0,s.Ay)("/api/expenses",m),[d,o]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[b,g]=(0,r.useState)([]),[f,y]=(0,r.useState)(()=>new Date().toISOString().slice(0,10)),[v,j]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1);async function N(t){if(t.preventDefault(),d.trim()&&u&&h){j(!0);try{var a;await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:d,amount:Number(u),payerId:h,beneficiaryIds:b,date:f})}),o(""),p(""),y(new Date().toISOString().slice(0,10)),x((null==(a=e[0])?void 0:a.id)||""),g(e.map(e=>e.id)),i(),k(!1)}finally{j(!1)}}}async function z(e,t){await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:e,beneficiaryId:t})}),i()}return(0,r.useEffect)(()=>{let t=e.map(e=>e.id);(t.length!==b.length||t.some(e=>!b.includes(e)))&&g(t),!h&&e.length>0&&x(e[0].id)},[e]),(0,r.useMemo)(()=>c(e,a),[e,a]),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Expenses"}),(0,n.jsx)("button",{type:"button",onClick:()=>k(!0),className:"text-xs rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5",children:"Add Expense"})]}),w&&(0,n.jsxs)("div",{className:"fixed inset-0 z-30 flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!v&&k(!1)}),(0,n.jsxs)("div",{className:"relative z-40 w-[92%] max-w-md rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{className:"text-base font-semibold",children:"Add expense"}),(0,n.jsxs)("form",{onSubmit:N,className:"mt-4 grid grid-cols-1 gap-3",children:[(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Description",value:d,onChange:e=>o(e.target.value)}),(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"$0.00",inputMode:"decimal",value:u,onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").split(".");p(t.length>1?"".concat(t[0],".").concat(t[1].slice(0,2)):t[0])},onBlur:()=>{if(!u)return;let e=Number(u);isNaN(e)||p(e.toFixed(2))}}),(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:f,onChange:e=>y(e.target.value)}),(0,n.jsxs)("select",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",value:h,onChange:e=>x(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Payer"}),e.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsx)("div",{className:"text-xs opacity-70",children:"This expense applies to these people:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 items-center",children:e.map(e=>{let t=b.includes(e.id);return(0,n.jsx)("button",{type:"button",onClick:()=>g(a=>t?a.filter(t=>t!==e.id):[...a,e.id]),className:"text-sm rounded-full px-3 py-1 border ".concat(t?"bg-indigo-600 text-white border-indigo-600":"border-zinc-300 dark:border-zinc-700"),children:e.name},e.id)})}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",onClick:()=>k(!1),disabled:v,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:v,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:v?"Adding…":"Add expense"})]})]})]})]}),(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[(t||l)&&(0,n.jsx)("div",{className:"text-sm opacity-70",children:"Loading…"}),0===a.length&&(0,n.jsx)("div",{className:"text-sm opacity-70",children:"No expenses yet"}),a.map(t=>{var a;let r=e.filter(e=>t.beneficiaryIds.includes(e.id)),s=r.length?t.amount/r.length:0;return(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-200 dark:border-zinc-800 p-4",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("div",{className:"font-medium break-words",children:t.description}),(0,n.jsxs)("div",{className:"mt-1 text-xl font-semibold tabular-nums",children:["$",t.amount.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-80",children:[(0,n.jsxs)("div",{children:["Payer: ",(null==(a=e.find(e=>e.id===t.payerId))?void 0:a.name)||"Unknown"]}),(0,n.jsx)("button",{type:"button",onClick:async()=>{await fetch("/api/expenses?id=".concat(encodeURIComponent(t.id)),{method:"DELETE"}),i()},className:"rounded-md border border-rose-300 text-rose-700 dark:border-rose-800 dark:text-rose-300 px-2 py-1 text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20",title:"Delete expense","aria-label":"Delete expense",children:"\uD83D\uDDD1️"})]}),t.date&&(0,n.jsx)("div",{className:"text-xs opacity-70",children:t.date})]})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-xs opacity-70",children:"Applies to:"}),(0,n.jsx)("button",{type:"button",onClick:async()=>{let a=e.map(e=>e.id);await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:t.id,beneficiaryIds:a})}),i()},className:"rounded-full bg-emerald-600 hover:bg-emerald-500 text-white h-6 w-6 flex items-center justify-center text-sm",title:"Add people","aria-label":"Add people",children:"+"})]}),(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:r.map(e=>(0,n.jsxs)("div",{className:"text-xs rounded-full px-2 py-1 border border-zinc-300 dark:border-zinc-700 flex items-center gap-1",children:[(0,n.jsx)("button",{type:"button",onClick:()=>z(t.id,e.id),className:"h-5 w-5 flex items-center justify-center rounded-full ".concat(t.paidByBeneficiary[e.id]?"bg-emerald-600 text-white":"bg-zinc-100 dark:bg-zinc-800"),title:"Mark ".concat(e.name," ").concat(t.paidByBeneficiary[e.id]?"unpaid":"paid"," (share $").concat(s.toFixed(2),")"),children:t.paidByBeneficiary[e.id]?"✓":""}),(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("button",{type:"button",onClick:async()=>{let a=t.beneficiaryIds.filter(t=>t!==e.id);await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:t.id,beneficiaryIds:a})}),i()},className:"ml-1 rounded-full border border-rose-300 text-rose-700 dark:border-rose-700 dark:text-rose-300 h-5 w-5 flex items-center justify-center hover:bg-rose-50 dark:hover:bg-rose-900/20","aria-label":"Remove ".concat(e.name),title:"Remove ".concat(e.name),children:"\xd7"})]},e.id))})]})]},t.id)})]})]})}let p=e=>fetch(e).then(e=>e.json());function h(){let{data:e=[]}=(0,s.Ay)("/api/attendees",p),{data:t=[]}=(0,s.Ay)("/api/expenses",p),a=c(e,t);return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Total Spend"}),(0,n.jsxs)("div",{className:"mt-2 text-2xl font-bold",children:["$",a.totalSpend.toFixed(2)]}),(0,n.jsx)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:e.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 dark:border-zinc-700 px-3 py-2",children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"opacity-70 mr-2",children:"net"}),(0,n.jsxs)("span",{className:a.perAttendeeNet.get(e.id)>0?"text-amber-600":"text-emerald-600",children:["$",Math.abs(a.perAttendeeNet.get(e.id)).toFixed(2)," ",a.perAttendeeNet.get(e.id)>0?"owes":"owed"]})]})]},e.id))})]})}async function x(){try{let e=await fetch("/api/geocode?q=".concat(encodeURIComponent(i.Ub),"&limit=1"),{cache:"no-store"});if(!e.ok)return null;let t=await e.json();if(!(null==t?void 0:t.length))return null;let a=t[0];return{lat:a.lat,lng:a.lng}}catch(e){return null}}a(9509);var b=a(9988),g=a(9509);let f=e=>fetch(e).then(e=>e.json());function y(){let{data:e=[]}=(0,s.Ay)("/api/attendees",f),[t,a]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x().then(a)},[]),(0,r.useEffect)(()=>{d(!0)},[]);let o=(0,r.useMemo)(()=>{let a=[t,...e.map(e=>e.location).filter(Boolean)].filter(Boolean);if(!a.length)return;let n=a.map(e=>e.lat),r=a.map(e=>e.lng);return{north:Math.max(...n),south:Math.min(...n),east:Math.max(...r),west:Math.min(...r)}},[e,t]),c=g.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,m=g.env.NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID;return(0,n.jsx)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden shadow-sm relative z-10 min-h-[360px]",children:(0,n.jsxs)("div",{className:"absolute inset-0 bg-zinc-100 dark:bg-zinc-900",children:[!c&&(0,n.jsx)("div",{className:"h-full w-full flex items-center justify-center text-sm opacity-70 px-4 text-center",children:"Set NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment to display the map."}),l&&c&&(0,n.jsx)(b.c4,{apiKey:c,libraries:["marker"],children:(0,n.jsxs)(b.T5,{style:{width:"100%",height:"100%"},defaultZoom:6,defaultCenter:t||{lat:40.75,lng:-73.98},mapId:m,children:[(0,n.jsx)(v,{bounds:o}),t&&(m?(0,n.jsx)(b.J8,{position:t,title:i.Ub,zIndex:1e3,children:(0,n.jsx)("div",{style:{fontSize:28,lineHeight:1,color:"#eab308",textShadow:"0 1px 2px rgba(0,0,0,.6)"},children:"★"})}):(0,n.jsx)(b.pH,{position:t,title:i.Ub,zIndex:1e3,icon:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="#eab308" stroke="#a16207" stroke-width="1.5"><path d="M12 2l2.9 5.9 6.5.9-4.7 4.6 1.1 6.5L12 17.8 6.2 20.9l1.1-6.5L2.6 8.8l6.5-.9L12 2z"/></svg>'))})),e.map(e=>e.location?(0,n.jsx)("div",{children:m?(0,n.jsx)(b.J8,{position:e.location,title:"".concat(e.name," — ").concat(e.startingAddress),children:(0,n.jsx)("div",{style:{width:16,height:16,background:"#2563eb",borderRadius:"9999px",border:"2px solid #ffffff",boxShadow:"0 1px 3px rgba(0,0,0,.6)"}})}):(0,n.jsx)(b.pH,{position:e.location,title:"".concat(e.name," — ").concat(e.startingAddress),icon:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><circle cx="9" cy="9" r="7" fill="#2563eb" stroke="#ffffff" stroke-width="2"/></svg>'))})},e.id):null)]})}),c&&!m&&(0,n.jsx)("div",{className:"absolute bottom-2 left-2 text-[11px] opacity-70 bg-white/70 dark:bg-zinc-900/70 rounded px-2 py-1",children:"Tip: Set NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID for Advanced Markers."})]})})}function v(e){let{bounds:t}=e,a=(0,b.ko)();return(0,r.useEffect)(()=>{a&&t&&a.fitBounds(t)},[a,t]),null}var j=a(6766),w=a(9982);let k={1:"bulbasaur",2:"ivysaur",3:"venusaur",4:"charmander",5:"charmeleon",6:"charizard",7:"squirtle",8:"wartortle",9:"blastoise",10:"caterpie",11:"metapod",12:"butterfree",13:"weedle",14:"kakuna",15:"beedrill",16:"pidgey",17:"pidgeotto",18:"pidgeot",19:"rattata",20:"raticate",21:"spearow",22:"fearow",23:"ekans",24:"arbok",25:"pikachu",26:"raichu",27:"sandshrew",28:"sandslash",29:"nidoran-f",30:"nidorina",31:"nidoqueen",32:"nidoran-m",33:"nidorino",34:"nidoking",35:"clefairy",36:"clefable",37:"vulpix",38:"ninetales",39:"jigglypuff",40:"wigglytuff",41:"zubat",42:"golbat",43:"oddish",44:"gloom",45:"vileplume",46:"paras",47:"parasect",48:"venonat",49:"venomoth",50:"diglett",51:"dugtrio",52:"meowth",53:"persian",54:"psyduck",55:"golduck",56:"mankey",57:"primeape",58:"growlithe",59:"arcanine",60:"poliwag",61:"poliwhirl",62:"poliwrath",63:"abra",64:"kadabra",65:"alakazam",66:"machop",67:"machoke",68:"machamp",69:"bellsprout",70:"weepinbell",71:"victreebel",72:"tentacool",73:"tentacruel",74:"geodude",75:"graveler",76:"golem",77:"ponyta",78:"rapidash",79:"slowpoke",80:"slowbro",81:"magnemite",82:"magneton",83:"farfetchd",84:"doduo",85:"dodrio",86:"seel",87:"dewgong",88:"grimer",89:"muk",90:"shellder",91:"cloyster",92:"gastly",93:"haunter",94:"gengar",95:"onix",96:"drowzee",97:"hypno",98:"krabby",99:"kingler",100:"voltorb",101:"electrode",102:"exeggcute",103:"exeggutor",104:"cubone",105:"marowak",106:"hitmonlee",107:"hitmonchan",108:"lickitung",109:"koffing",110:"weezing",111:"rhyhorn",112:"rhydon",113:"chansey",114:"tangela",115:"kangaskhan",116:"horsea",117:"seadra",118:"goldeen",119:"seaking",120:"staryu",121:"starmie",122:"mr-mime",123:"scyther",124:"jynx",125:"electabuzz",126:"magmar",127:"pinsir",128:"tauros",129:"magikarp",130:"gyarados",131:"lapras",132:"ditto",133:"eevee",134:"vaporeon",135:"jolteon",136:"flareon",137:"porygon",138:"omanyte",139:"omastar",140:"kabuto",141:"kabutops",142:"aerodactyl",143:"snorlax",144:"articuno",145:"zapdos",146:"moltres",147:"dratini",148:"dragonair",149:"dragonite",150:"mewtwo",151:"mew",152:"chikorita",153:"bayleef",154:"meganium",155:"cyndaquil",156:"quilava",157:"typhlosion",158:"totodile",159:"croconaw",160:"feraligatr",161:"sentret",162:"furret",163:"hoothoot",164:"noctowl",165:"ledyba",166:"ledian",167:"spinarak",168:"ariados",169:"crobat",170:"chinchou",171:"lanturn",172:"pichu",173:"cleffa",174:"igglybuff",175:"togepi",176:"togetic",177:"natu",178:"xatu",179:"mareep",180:"flaaffy",181:"ampharos",182:"bellossom",183:"marill",184:"azumarill",185:"sudowoodo",186:"politoed",187:"hoppip",188:"skiploom",189:"jumpluff",190:"aipom",191:"sunkern",192:"sunflora",193:"yanma",194:"wooper",195:"quagsire",196:"espeon",197:"umbreon",198:"murkrow",199:"slowking",200:"misdreavus",201:"unown",202:"wobbuffet",203:"girafarig",204:"pineco",205:"forretress",206:"dunsparce",207:"gligar",208:"steelix",209:"snubbull",210:"granbull",211:"qwilfish",212:"scizor",213:"shuckle",214:"heracross",215:"sneasel",216:"teddiursa",217:"ursaring",218:"slugma",219:"magcargo",220:"swinub",221:"piloswine",222:"corsola",223:"remoraid",224:"octillery",225:"delibird",226:"mantine",227:"skarmory",228:"houndour",229:"houndoom",230:"kingdra",231:"phanpy",232:"donphan",233:"porygon2",234:"stantler",235:"smeargle",236:"tyrogue",237:"hitmontop",238:"smoochum",239:"elekid",240:"magby",241:"miltank",242:"blissey",243:"raikou",244:"entei",245:"suicune",246:"larvitar",247:"pupitar",248:"tyranitar",249:"lugia",250:"ho-oh",251:"celebi",252:"treecko",253:"grovyle",254:"sceptile",255:"torchic",256:"combusken",257:"blaziken",258:"mudkip",259:"marshtomp",260:"swampert",261:"poochyena",262:"mightyena",263:"zigzagoon",264:"linoone",265:"wurmple",266:"silcoon",267:"beautifly",268:"cascoon",269:"dustox",270:"lotad",271:"lombre",272:"ludicolo",273:"seedot",274:"nuzleaf",275:"shiftry",276:"taillow",277:"swellow",278:"wingull",279:"pelipper",280:"ralts",281:"kirlia",282:"gardevoir",283:"surskit",284:"masquerain",285:"shroomish",286:"breloom",287:"slakoth",288:"vigoroth",289:"slaking",290:"nincada",291:"ninjask",292:"shedinja",293:"whismur",294:"loudred",295:"exploud",296:"makuhita",297:"hariyama",298:"azurill",299:"nosepass",300:"skitty",301:"delcatty",302:"sableye",303:"mawile",304:"aron",305:"lairon",306:"aggron",307:"meditite",308:"medicham",309:"electrike",310:"manectric",311:"plusle",312:"minun",313:"volbeat",314:"illumise",315:"roselia",316:"gulpin",317:"swalot",318:"carvanha",319:"sharpedo",320:"wailmer",321:"wailord",322:"numel",323:"camerupt",324:"torkoal",325:"spoink",326:"grumpig",327:"spinda",328:"trapinch",329:"vibrava",330:"flygon",331:"cacnea",332:"cacturne",333:"swablu",334:"altaria",335:"zangoose",336:"seviper",337:"lunatone",338:"solrock",339:"barboach",340:"whiscash",341:"corphish",342:"crawdaunt",343:"baltoy",344:"claydol",345:"lileep",346:"cradily",347:"anorith",348:"armaldo",349:"feebas",350:"milotic",351:"castform",352:"kecleon",353:"shuppet",354:"banette",355:"duskull",356:"dusclops",357:"tropius",358:"chimecho",359:"absol",360:"wynaut",361:"snorunt",362:"glalie",363:"spheal",364:"sealeo",365:"walrein"},N="pokemon-cache-v1";function z(){try{let e=localStorage.getItem(N);return e?JSON.parse(e):{}}catch(e){return{}}}function C(e){try{localStorage.setItem(N,JSON.stringify(e))}catch(e){}}async function S(e){if(e<1||e>365)return null;let t=z();if(t[e])return t[e];let a=k[e]||"#".concat(e);try{var n,r;let s=await fetch("https://pokeapi.co/api/v2/pokemon-species/".concat(e,"/"),{cache:"force-cache"});if(!s.ok)throw Error("http");let i=await s.json(),l=((null==(r=i.names)||null==(n=r.find(e=>{var t;return(null==(t=e.language)?void 0:t.name)==="en"}))?void 0:n.name)||a).toLowerCase(),d=(i.flavor_text_entries||[]).filter(e=>{var t;return(null==(t=e.language)?void 0:t.name)==="en"}).map(e=>e.flavor_text||"").map(e=>e.replace(/[\f\n\r]+/g," ").replace(/\s+/g," ").trim()).filter(e=>e.length>0).sort((e,t)=>t.length-e.length)[0],o={id:e,name:l,flavor_text:d};return t[e]=o,C(t),o}catch(r){let n={id:e,name:a};return t[e]=n,C(t),n}}function D(){let e=Math.max(0,Math.max(0,(0,w.m)(new Date(i.Nn),new Date))-1),t=function(e){let[t,a]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=!1;return async function(){if(!e||e<1)return a(null);let n=function(e){let t=z();return t[e]?t[e]:k[e]?{id:e,name:k[e]}:null}(e);n&&!t&&a(n);let r=await S(e);t||a(r)}(),()=>{t=!0}},[e]),t}(0===e?25:e);return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Pok\xe9mon of the Day"})}),t?(0,n.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,n.jsx)("div",{className:"relative h-32 w-32 shrink-0",children:(0,n.jsx)(j.default,{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t.id,".png"),alt:t.name,fill:!0,sizes:"128px",className:"object-contain"})}),(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsxs)("div",{className:"text-xl font-semibold capitalize",children:["#",t.id," • ",t.name.replace("-"," ")]}),(0,n.jsx)("p",{className:"mt-2 text-sm opacity-80 line-clamp-4",children:t.flavor_text||"A mysterious Pok\xe9mon appears as we count down to the trip!"})]})]}):(0,n.jsx)("div",{className:"mt-4 text-sm opacity-70",children:"No Pok\xe9mon today. Rest up for the trip!"})]})}let A=e=>fetch(e).then(e=>e.json());function T(){let{data:e=[]}=(0,s.Ay)("/api/attendees",A),{data:t=[],mutate:a}=(0,s.Ay)("/api/stuff",A),{data:i={items:[],categories:[]}}=(0,s.Ay)("/api/stuff/items",A),l=(null==i?void 0:i.items)||[],d=(null==i?void 0:i.categories)||[],[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(1),[p,h]=(0,r.useState)(""),[x,b]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(-1),[j,w]=(0,r.useState)([]),[k,N]=(0,r.useState)([]),[z,C]=(0,r.useState)(!1),S=(0,r.useRef)(null),D=(0,r.useRef)(null),T=(0,r.useRef)(null);function I(e){return e.toLowerCase().replace(/\b([a-z])/g,e=>e.toUpperCase())}function P(e){c(I(e)),f(!1)}async function E(e){e.preventDefault();let t=o.trim(),n=p.trim();t&&x&&!(m<1)&&(await fetch("/api/stuff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thingName:t,quantity:m,attendeeId:x,category:n||void 0})}),c(""),u(1),h(""),a())}async function M(e){await fetch("/api/stuff?id=".concat(encodeURIComponent(e)),{method:"DELETE"}),a()}(0,r.useEffect)(()=>{var e;return window.clearTimeout(null!=(e=D.current)?e:void 0),D.current=window.setTimeout(()=>{let e=o.trim().toLowerCase();if(!e){w([]),f(!1);return}let t=(l||[]).filter(t=>t.name.includes(e)).slice(0,8);w(t),f(t.length>0),v(-1)},150),()=>{D.current&&window.clearTimeout(D.current)}},[o,l]),(0,r.useEffect)(()=>{var e;return window.clearTimeout(null!=(e=T.current)?e:void 0),T.current=window.setTimeout(()=>{let e=p.trim().toLowerCase();N(e?d.filter(t=>t.toLowerCase().includes(e)).slice(0,8):d.slice(0,8))},150),()=>{T.current&&window.clearTimeout(T.current)}},[p,d]),(0,r.useEffect)(()=>{!x&&e.length>0&&b(e[0].id)},[e,x]);let G=(0,r.useMemo)(()=>new Map(e.map(e=>[e.id,e.name])),[e]),[O,L]=(0,r.useState)("date"),[_,R]=(0,r.useState)("desc");function U(e){e===O?R(e=>"asc"===e?"desc":"asc"):(L(e),R("date"===e?"desc":"asc"))}let B=(0,r.useMemo)(()=>{let e=[...t||[]];return e.sort((e,t)=>{let a="asc"===_?1:-1,n="thing"===O?e.itemName:"category"===O?e.itemCategory||"":"person"===O?G.get(e.attendeeId)||e.attendeeName:"quantity"===O?e.quantity:new Date(e.createdAt).getTime(),r="thing"===O?t.itemName:"category"===O?t.itemCategory||"":"person"===O?G.get(t.attendeeId)||t.attendeeName:"quantity"===O?t.quantity:new Date(t.createdAt).getTime();if("number"==typeof n&&"number"==typeof r)return(n-r)*a;let s=String(n).toLowerCase(),i=String(r).toLowerCase();return s<i?-1*a:s>i?+a:0}),e},[t,_,O,G]);return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Stuff To Bring"}),(0,n.jsxs)("form",{onSubmit:E,className:"mt-4 grid grid-cols-1 lg:grid-cols-4 gap-3 items-start",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Thing (e.g., paper towels)",value:o,onChange:e=>c(e.target.value),onFocus:()=>j.length>0&&f(!0),onKeyDown:e=>{g&&("ArrowDown"===e.key&&(e.preventDefault(),v(e=>Math.min(e+1,j.length-1))),"ArrowUp"===e.key&&(e.preventDefault(),v(e=>Math.max(e-1,0))),"Enter"===e.key&&y>=0&&(e.preventDefault(),P(j[y].name)),"Escape"===e.key&&f(!1))}}),g&&j.length>0&&(0,n.jsx)("div",{className:"absolute z-20 mt-1 w-full max-h-56 overflow-auto rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-lg",children:j.map((e,t)=>(0,n.jsx)("button",{type:"button",onClick:()=>P(e.name),className:"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 ".concat(t===y?"bg-zinc-50 dark:bg-zinc-800":""),children:I(e.name)},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"sr-only",htmlFor:"qty",children:"Quantity"}),(0,n.jsx)("input",{id:"qty",type:"number",min:1,className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:m,onChange:e=>u(Math.max(1,Number(e.target.value)||1))})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Category (e.g., kitchen, games)",value:p,onChange:e=>h(e.target.value),onFocus:()=>{C(!0),N((d||[]).slice(0,8))},onBlur:()=>setTimeout(()=>C(!1),100),ref:S}),z&&k.length>0&&(0,n.jsx)("div",{className:"absolute z-20 mt-1 w-full max-h-56 overflow-auto rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-lg",children:k.map(e=>(0,n.jsx)("button",{type:"button",onClick:()=>{h(I(e)),C(!1)},className:"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",children:I(e)},e))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("select",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",value:x,onChange:e=>b(e.target.value),children:e.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,n.jsx)("button",{type:"submit",className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-2 text-sm",children:"Add"})]})]}),(0,n.jsx)("div",{className:"mt-5",children:0===B.length?(0,n.jsx)("div",{className:"py-3 text-sm opacity-70",children:"No items yet"}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left border-b border-zinc-200 dark:border-zinc-800",children:[(0,n.jsx)("th",{className:"py-2 pr-3",children:(0,n.jsxs)("button",{type:"button",onClick:()=>U("thing"),className:"hover:underline",children:["Thing ","thing"===O?"asc"===_?"▲":"▼":""]})}),(0,n.jsx)("th",{className:"py-2 px-3",children:(0,n.jsxs)("button",{type:"button",onClick:()=>U("category"),className:"hover:underline",children:["Category ","category"===O?"asc"===_?"▲":"▼":""]})}),(0,n.jsx)("th",{className:"py-2 px-3",children:(0,n.jsxs)("button",{type:"button",onClick:()=>U("quantity"),className:"hover:underline",children:["Quantity ","quantity"===O?"asc"===_?"▲":"▼":""]})}),(0,n.jsx)("th",{className:"py-2 px-3",children:(0,n.jsxs)("button",{type:"button",onClick:()=>U("person"),className:"hover:underline",children:["Person ","person"===O?"asc"===_?"▲":"▼":""]})}),(0,n.jsx)("th",{className:"py-2 pl-3",children:(0,n.jsxs)("button",{type:"button",onClick:()=>U("date"),className:"hover:underline",children:["Date Added ","date"===O?"asc"===_?"▲":"▼":""]})}),(0,n.jsx)("th",{className:"py-2 pl-3"})]})}),(0,n.jsx)("tbody",{children:B.map(e=>(0,n.jsxs)("tr",{className:"border-b border-zinc-100 dark:border-zinc-800",children:[(0,n.jsx)("td",{className:"py-2 pr-3 font-medium capitalize",children:e.itemName}),(0,n.jsx)("td",{className:"py-2 px-3",children:e.itemCategory?I(e.itemCategory):(0,n.jsx)("span",{className:"opacity-50",children:"—"})}),(0,n.jsx)("td",{className:"py-2 px-3",children:e.quantity}),(0,n.jsx)("td",{className:"py-2 px-3",children:G.get(e.attendeeId)||e.attendeeName}),(0,n.jsx)("td",{className:"py-2 pl-3 whitespace-nowrap",children:function(e){try{let t=new Date(e);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(t)}catch(t){return e}}(e.createdAt)}),(0,n.jsx)("td",{className:"py-2 pl-3 text-right",children:(0,n.jsx)("button",{type:"button",className:"rounded-md border px-2 py-1 text-xs",onClick:()=>M(e.id),title:"Remove",children:"\uD83D\uDDD1️"})})]},e.id))})]})})})]})}let I=e=>fetch(e).then(e=>e.json());function P(){var e;let[t,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[d,o]=(0,r.useState)(null),[c,m]=(0,r.useState)("games"),[u,p]=(0,r.useState)("winRate"),[h,x]=(0,r.useState)("desc"),{data:b=[],mutate:g,error:f}=(0,s.Ay)("/api/pickleball",I),{data:y=[]}=(0,s.Ay)("/api/attendees",I);console.log("PickleballTracker - games:",b),console.log("PickleballTracker - error:",f);let[v,j]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[N,z]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[D,A]=(0,r.useState)(""),[T,P]=(0,r.useState)(""),[E,M]=(0,r.useState)(""),[G,O]=(0,r.useState)(0),[L,_]=(0,r.useState)(0),[R,U]=(0,r.useState)(""),[B,q]=(0,r.useState)(!1),F=(0,r.useMemo)(()=>{let e=new Map;return y.forEach(t=>{e.set(t.id,{id:t.id,name:t.name,wins:0,losses:0,winRate:0,bestTeammate:null,totalGames:0})}),b.forEach(t=>{let a=[t.team1Player1Id,t.team1Player2Id].filter(e=>!!e),n=[t.team2Player1Id,t.team2Player2Id].filter(e=>!!e),r="team1"===t.winner;a.forEach(t=>{let a=e.get(t);a&&(a.totalGames++,r?a.wins++:a.losses++)}),n.forEach(t=>{let a=e.get(t);a&&(a.totalGames++,r?a.losses++:a.wins++)})}),e.forEach(e=>{e.winRate=e.totalGames>0?e.wins/e.totalGames*100:0;let t=new Map;b.forEach(a=>{let n=[a.team1Player1Id,a.team1Player2Id].filter(e=>!!e),r=[a.team2Player1Id,a.team2Player2Id].filter(e=>!!e);n.includes(e.id)?n.forEach(n=>{if(n!==e.id){let e=t.get(n)||{wins:0,totalGames:0};e.totalGames++,"team1"===a.winner&&e.wins++,t.set(n,e)}}):r.includes(e.id)&&r.forEach(n=>{if(n!==e.id){let e=t.get(n)||{wins:0,totalGames:0};e.totalGames++,"team2"===a.winner&&e.wins++,t.set(n,e)}})});let a=null,n=0;t.forEach((e,t)=>{let r=e.totalGames>0?e.wins/e.totalGames*100:0;if(r>n){n=r;let s=y.find(e=>e.id===t);a=s?{id:s.id,name:s.name,wins:e.wins,totalGames:e.totalGames}:null}}),e.bestTeammate=a}),Array.from(e.values())},[b,y]),J=(0,r.useMemo)(()=>[...F].sort((e,t)=>{let a,n;switch(u){case"name":a=e.name.toLowerCase(),n=t.name.toLowerCase();break;case"wins":a=e.wins,n=t.wins;break;case"losses":a=e.losses,n=t.losses;break;case"winRate":default:a=e.winRate,n=t.winRate;break;case"totalGames":a=e.totalGames,n=t.totalGames;break;case"bestTeammate":a=e.bestTeammate?e.bestTeammate.wins/e.bestTeammate.totalGames*100:0,n=t.bestTeammate?t.bestTeammate.wins/t.bestTeammate.totalGames*100:0}return"asc"===h?a>n?1:-1:a<n?1:-1}),[F,u,h]);function H(e){u===e?x("asc"===h?"desc":"asc"):(p(e),x("desc"))}function W(e){let{field:t}=e;return u!==t?(0,n.jsx)("span",{className:"text-gray-400",children:"↕"}):"asc"===h?(0,n.jsx)("span",{children:"↑"}):(0,n.jsx)("span",{children:"↓"})}async function K(e){if(e.preventDefault(),C&&T){q(!0);try{(await fetch("/api/pickleball",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:v,time:w||void 0,location:N||void 0,team1Player1Id:C,team1Player2Id:D||void 0,team2Player1Id:T,team2Player2Id:E||void 0,team1Score:G,team2Score:L,notes:R||void 0})})).ok&&(g(),a(!1),j(new Date().toISOString().split("T")[0]),k(""),z(""),S(""),A(""),P(""),M(""),O(0),_(0),U(""))}finally{q(!1)}}}async function $(){d&&(await fetch("/api/pickleball/".concat(d.id),{method:"DELETE"})).ok&&(g(),l(!1),o(null))}function V(e){var t;return(null==(t=y.find(t=>t.id===e))?void 0:t.name)||"Unknown"}function Y(e){return new Date(e).toLocaleDateString()}return(0,r.useEffect)(()=>{j(new Date().toISOString().split("T")[0])},[]),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Pickleball"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex rounded-lg border border-zinc-300 dark:border-zinc-700",children:[(0,n.jsx)("button",{onClick:()=>m("games"),className:"px-3 py-1.5 text-sm rounded-l-lg ".concat("games"===c?"bg-indigo-600 text-white":"bg-transparent hover:bg-zinc-100 dark:hover:bg-zinc-800"),children:"Games"}),(0,n.jsx)("button",{onClick:()=>m("summary"),className:"px-3 py-1.5 text-sm rounded-r-lg ".concat("summary"===c?"bg-indigo-600 text-white":"bg-transparent hover:bg-zinc-100 dark:hover:bg-zinc-800"),children:"Summary"})]}),(0,n.jsx)("button",{onClick:()=>a(!0),className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:"Add Game"})]})]}),t&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Add Pickleball Game"}),(0,n.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",required:!0}),(0,n.jsx)("input",{type:"time",value:w,onChange:e=>k(e.target.value),className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Location (optional)",value:N,onChange:e=>z(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h5",{className:"font-medium",children:"Team 1"}),(0,n.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Player 1"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsxs)("select",{value:D,onChange:e=>A(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",children:[(0,n.jsx)("option",{value:"",children:"Select Player 2 (optional)"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h5",{className:"font-medium",children:"Team 2"}),(0,n.jsxs)("select",{value:T,onChange:e=>P(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Player 1"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsxs)("select",{value:E,onChange:e=>M(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 px-3 py-2",children:[(0,n.jsx)("option",{value:"",children:"Select Player 2 (optional)"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Team 1 Score"}),(0,n.jsx)("input",{type:"number",min:"0",value:G,onChange:e=>O(parseInt(e.target.value)||0),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Team 2 Score"}),(0,n.jsx)("input",{type:"number",min:"0",value:L,onChange:e=>_(parseInt(e.target.value)||0),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",required:!0})]})]}),(0,n.jsx)("textarea",{placeholder:"Notes (optional)",value:R,onChange:e=>U(e.target.value),className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",rows:3}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)("button",{type:"button",onClick:()=>a(!1),className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",disabled:B,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:B,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:B?"Saving…":"Save Game"})]})]})]})}),i&&d&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Delete Game"}),(0,n.jsxs)("p",{className:"text-sm mb-6",children:["Are you sure you want to delete the game from ",Y(d.date),d.time&&" at ".concat((e=d.time)||""),"?"]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)("button",{onClick:function(){l(!1),o(null)},className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",children:"Cancel"}),(0,n.jsx)("button",{onClick:$,className:"rounded-md bg-red-600 hover:bg-red-500 text-white font-medium px-3 py-1.5 text-sm",children:"Delete"})]})]})}),"summary"===c&&(0,n.jsxs)("div",{className:"space-y-4",children:[f&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["Error loading games: ",f.message]}),0===J.length?(0,n.jsx)("p",{className:"text-sm opacity-70",children:"No players found. Add some games first!"}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-zinc-200 dark:border-zinc-700",children:[(0,n.jsx)("th",{className:"text-left py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("name"),className:"flex items-center gap-1 hover:text-indigo-600",children:["Player ",(0,n.jsx)(W,{field:"name"})]})}),(0,n.jsx)("th",{className:"text-center py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("totalGames"),className:"flex items-center justify-center gap-1 hover:text-indigo-600",children:["Games ",(0,n.jsx)(W,{field:"totalGames"})]})}),(0,n.jsx)("th",{className:"text-center py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("wins"),className:"flex items-center justify-center gap-1 hover:text-indigo-600",children:["Wins ",(0,n.jsx)(W,{field:"wins"})]})}),(0,n.jsx)("th",{className:"text-center py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("losses"),className:"flex items-center justify-center gap-1 hover:text-indigo-600",children:["Losses ",(0,n.jsx)(W,{field:"losses"})]})}),(0,n.jsx)("th",{className:"text-center py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("winRate"),className:"flex items-center justify-center gap-1 hover:text-indigo-600",children:["Win Rate ",(0,n.jsx)(W,{field:"winRate"})]})}),(0,n.jsx)("th",{className:"text-left py-2 px-3",children:(0,n.jsxs)("button",{onClick:()=>H("bestTeammate"),className:"flex items-center gap-1 hover:text-indigo-600",children:["Best Teammate ",(0,n.jsx)(W,{field:"bestTeammate"})]})})]})}),(0,n.jsx)("tbody",{children:J.map(e=>(0,n.jsxs)("tr",{className:"border-b border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-800",children:[(0,n.jsx)("td",{className:"py-3 px-3 font-medium",children:e.name}),(0,n.jsx)("td",{className:"py-3 px-3 text-center",children:e.totalGames}),(0,n.jsx)("td",{className:"py-3 px-3 text-center text-green-600 dark:text-green-400",children:e.wins}),(0,n.jsx)("td",{className:"py-3 px-3 text-center text-red-600 dark:text-red-400",children:e.losses}),(0,n.jsx)("td",{className:"py-3 px-3 text-center",children:(0,n.jsxs)("span",{className:"font-medium ".concat(e.winRate>=50?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.winRate.toFixed(1),"%"]})}),(0,n.jsx)("td",{className:"py-3 px-3",children:e.bestTeammate?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.bestTeammate.name}),(0,n.jsxs)("div",{className:"text-xs opacity-70",children:[e.bestTeammate.wins,"/",e.bestTeammate.totalGames," games (",(e.bestTeammate.wins/e.bestTeammate.totalGames*100).toFixed(1),"%)"]})]}):(0,n.jsx)("span",{className:"opacity-50",children:"No teammates"})})]},e.id))})]})})]}),"games"===c&&(0,n.jsxs)("div",{className:"space-y-4",children:[f&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["Error loading games: ",f.message]}),0!==b.length||f?b.map(e=>{var t;return(0,n.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-800 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium",children:[Y(e.date),e.time&&" at ".concat((t=e.time)||"")]}),e.location&&(0,n.jsx)("div",{className:"text-sm opacity-70",children:e.location})]}),(0,n.jsx)("button",{onClick:()=>{o(e),l(!0)},className:"text-red-500 hover:text-red-700 text-sm",children:"\uD83D\uDDD1️"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,n.jsxs)("div",{className:"p-3 rounded-lg ".concat("team1"===e.winner?"bg-green-100 dark:bg-green-900":"bg-zinc-100 dark:bg-zinc-800"),children:[(0,n.jsx)("div",{className:"font-medium",children:"Team 1"}),(0,n.jsxs)("div",{className:"text-sm",children:[V(e.team1Player1Id),e.team1Player2Id&&" & ".concat(V(e.team1Player2Id))]}),(0,n.jsx)("div",{className:"text-lg font-bold",children:e.team1Score})]}),(0,n.jsxs)("div",{className:"p-3 rounded-lg ".concat("team2"===e.winner?"bg-green-100 dark:bg-green-900":"bg-zinc-100 dark:bg-zinc-800"),children:[(0,n.jsx)("div",{className:"font-medium",children:"Team 2"}),(0,n.jsxs)("div",{className:"text-sm",children:[V(e.team2Player1Id),e.team2Player2Id&&" & ".concat(V(e.team2Player2Id))]}),(0,n.jsx)("div",{className:"text-lg font-bold",children:e.team2Score})]})]}),e.notes&&(0,n.jsxs)("div",{className:"text-sm opacity-70 italic",children:["“",e.notes,"”"]})]},e.id)}):(0,n.jsx)("p",{className:"text-sm opacity-70",children:"No games recorded yet. Add the first game!"})]})]})}function E(){let[e,t]=(0,r.useState)("planning");return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,n.jsx)(M,{label:"Planning",active:"planning"===e,onClick:()=>t("planning")}),(0,n.jsx)(M,{label:"Weekend Of",active:"weekend"===e,onClick:()=>t("weekend")}),(0,n.jsx)(M,{label:"The Bill",active:"bill"===e,onClick:()=>t("bill")})]})}),"planning"===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(D,{}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsx)(d,{}),(0,n.jsx)(r.Suspense,{fallback:null,children:(0,n.jsx)(y,{})})]}),(0,n.jsx)(T,{})]}),"weekend"===e&&(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)(P,{})}),"bill"===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(u,{}),(0,n.jsx)(h,{})]})]})}function M(e){let{label:t,active:a,onClick:r}=e;return(0,n.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 md:px-5 md:py-2.5 text-sm md:text-base rounded-full transition-colors ".concat(a?"bg-indigo-600 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 hover:bg-zinc-200 dark:hover:bg-zinc-700"),"aria-current":a?"page":void 0,children:t})}},9009:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var n=a(5155),r=a(1950),s=a(6766),i=a(958),l=a(2348),d=a(2115);function o(){let[e,t]=(0,d.useState)(()=>new Date),[a,o]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let e=setInterval(()=>t(new Date),1e3);return()=>clearInterval(e)},[]),(0,d.useEffect)(()=>{o(!0)},[]);let c=(0,d.useMemo)(()=>new Date(r.Nn),[]),m=(0,d.useMemo)(()=>new Date(r.W5),[]),u=Math.max(0,(0,i.O)(c,e));(0,i.O)(m,e);let p=function(e){let t=Math.floor(e/86400),a=Math.floor((e-=24*t*3600)/3600),n=Math.floor((e-=3600*a)/60),r=e-60*n;return{days:t,hours:a,minutes:n,seconds:r}}(u);return(0,n.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden shadow-lg bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"relative h-40 md:h-56 w-full",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-fuchsia-600"}),(0,n.jsx)(s.default,{src:"/house-hero.jpg",alt:"Trip hero",fill:!0,priority:!0,sizes:"100vw",className:"absolute inset-0 h-full w-full object-cover"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,n.jsxs)("div",{className:"absolute inset-x-0 bottom-0 p-4 flex items-end justify-between text-white gap-3",children:[(0,n.jsx)("h2",{className:"text-4xl md:text-6xl font-light md:font-normal leading-tight tracking-tight drop-shadow-[0_2px_10px_rgba(0,0,0,0.55)] text-transparent bg-clip-text bg-gradient-to-r from-indigo-100 via-fuchsia-100 to-pink-100",children:r.QV}),(0,n.jsx)("a",{href:r.NG,target:"_blank",rel:"noreferrer",className:"text-xs md:text-sm bg-white/20 hover:bg-white/30 backdrop-blur rounded-md px-2 py-1 whitespace-nowrap",children:"View Airbnb"})]})]}),(0,n.jsxs)("div",{className:"px-6 pb-6 pt-4",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-zinc-900 dark:text-zinc-50",children:[(0,n.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-zinc-100 dark:bg-zinc-800 px-3 py-1.5 text-xs md:text-sm",children:[(0,n.jsx)("span",{"aria-hidden":!0,children:"\uD83D\uDCC5"}),(0,l.GP)(c,"MMM d, yyyy")," → ",(0,l.GP)(m,"MMM d, yyyy")]}),(0,n.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(r.Ub)),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-200 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 px-3 py-1.5 text-xs md:text-sm break-words",children:[(0,n.jsx)("span",{"aria-hidden":!0,children:"\uD83D\uDCCD"}),r.Ub]})]}),(0,n.jsx)("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3 text-center",children:["Days","Hours","Minutes","Seconds"].map((e,t)=>{let r=[p.days,p.hours,p.minutes,p.seconds][t];return(0,n.jsxs)("div",{className:"rounded-xl bg-zinc-50 dark:bg-white/10 backdrop-blur px-3 py-4",children:[(0,n.jsx)("div",{className:"text-3xl font-bold tabular-nums",suppressHydrationWarning:!0,children:a?r:0}),(0,n.jsx)("div",{className:"text-xs uppercase tracking-wide opacity-70",children:e})]},e)})})]})]})}}},e=>{e.O(0,[654,441,964,358],()=>e(e.s=594)),_N_E=e.O()}]);
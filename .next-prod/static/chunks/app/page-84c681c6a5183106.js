(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{594:(e,t,a)=>{Promise.resolve().then(a.bind(a,9009)),Promise.resolve().then(a.bind(a,1205))},1205:(e,t,a)=>{"use strict";a.d(t,{default:()=>O});var n=a(5155),s=a(2115),i=a(838);function r(e){var t;if(!e||"string"!=typeof e)return"";let a=e.split(",").map(e=>e.trim()).filter(Boolean);if(0===a.length)return"";let n=a[0]||"",s=a[1]||"",i=/\b\d{5}(?:-\d{4})?\b/,r=a.findIndex(e=>i.test(e)),l=r>=0&&(null==(t=a[r].match(i))?void 0:t[0])||"",d="";if(r>0){let e=a[r-1];!e||/\d/.test(e)||/County/i.test(e)||/United\s+States/i.test(e)||(d=e)}if(!d)for(let e=a.length-1;e>=2;e--){let t=a[e];if(!/\d/.test(t)&&!/County/i.test(t)&&!/United\s+States?/i.test(t)){d=t;break}}let o=[a.findIndex(e=>/County/i.test(e)),r,d?a.indexOf(d):-1].filter(e=>e>0),c=o.length?Math.min(...o):a.length,m="";for(let e=Math.min(c-1,a.length-1);e>=2;e--){let t=a[e];if(!(!t||/County/i.test(t))&&!/United\s+States?/i.test(t)){m=t;break}}let u=[n,s,m].filter(Boolean).join(" ").replace(/\s+/g," ").trim(),p=[l,d].filter(Boolean).join(" ").trim();return u&&p?"".concat(u,", ").concat(p):u||p||e}var l=a(1950);let d=e=>fetch(e).then(e=>e.json());function o(){let{data:e,mutate:t,isLoading:a}=(0,i.Ay)("/api/attendees",d),[o,c]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[p,x]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[g,f]=(0,s.useState)(null),[v,y]=(0,s.useState)(l.PJ),[j,N]=(0,s.useState)(l.MI),[w,k]=(0,s.useState)(!1),[z,C]=(0,s.useState)(null),[S,D]=(0,s.useState)([]),[A,M]=(0,s.useState)(!1),[P,I]=(0,s.useState)(-1),E=(0,s.useRef)(null);function O(e){u(e.label),M(!1)}async function T(e){if(e.preventDefault(),o.trim()&&m.trim()){x(!0);try{await fetch("/api/attendees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,startingAddress:m,arrivalDate:v||void 0,departureDate:j||void 0})}),c(""),u(""),y(l.PJ),N(l.MI),D([]),M(!1),t(),k(!1)}finally{x(!1)}}}async function U(e){if(e){f(null),b(e);try{let a=await fetch("/api/attendees/".concat(e),{method:"DELETE"});if(!a.ok)return void(409===a.status?f("Cannot remove attendee: they are referenced by expenses."):404===a.status?f("Attendee not found."):f("Failed to remove attendee."));await t()}catch(e){f("Failed to remove attendee.")}finally{b(null),C(null)}}}return(0,s.useEffect)(()=>{if(m.trim().length<3){D([]),M(!1);return}let e=setTimeout(async()=>{try{var e;null==(e=E.current)||e.abort();let t=new AbortController;E.current=t;let a=await fetch("/api/geocode?q=".concat(encodeURIComponent(m),"&limit=6"),{signal:t.signal});if(!a.ok)return;let n=await a.json();D(n),M(!0),I(-1)}catch(e){}},250);return()=>clearTimeout(e)},[m]),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Attendees"}),(0,n.jsx)("button",{type:"button",onClick:()=>k(!0),className:"text-xs rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5",children:"Join Man Weekend"})]}),g&&(0,n.jsx)("div",{className:"mt-3 text-sm text-rose-600 dark:text-rose-400",children:g}),(0,n.jsxs)("div",{className:"mt-4 divide-y divide-zinc-200 dark:divide-zinc-800",children:[a&&(0,n.jsx)("div",{className:"py-3 text-sm opacity-70",children:"Loading…"}),(null==e?void 0:e.length)?e.map(e=>(0,n.jsxs)("div",{className:"py-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)("div",{className:"text-xs opacity-70",children:r(e.startingAddress)}),(e.arrivalDate||e.departureDate)&&(0,n.jsxs)("div",{className:"mt-1 text-[11px] opacity-70",children:[e.arrivalDate?"Arrives ".concat(e.arrivalDate):"",e.arrivalDate&&e.departureDate?" • ":"",e.departureDate?"Departs ".concat(e.departureDate):""]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[e.location?(0,n.jsxs)("div",{className:"text-xs opacity-70",children:[e.location.lat.toFixed(3),", ",e.location.lng.toFixed(3)]}):(0,n.jsx)("div",{className:"text-xs opacity-50 italic",children:"geocoding…"}),(0,n.jsx)("button",{type:"button",onClick:()=>C({id:e.id,name:e.name}),disabled:h===e.id,title:"Remove attendee",className:"rounded-md border px-2 py-1 text-xs transition-colors ".concat(h===e.id?"opacity-50 cursor-not-allowed":"hover:bg-rose-50 dark:hover:bg-rose-900/20"," border-rose-300 dark:border-rose-800 text-rose-700 dark:text-rose-300"),"aria-label":"Remove ".concat(e.name),children:"\uD83D\uDDD1️"})]})]},e.id)):(0,n.jsx)("div",{className:"py-3 text-sm opacity-70",children:"No attendees yet"})]}),w&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!p&&k(!1)}),(0,n.jsxs)("div",{className:"relative z-[1001] w-[92%] max-w-md rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{className:"text-base font-semibold",children:"Join Man Weekend"}),(0,n.jsxs)("form",{onSubmit:T,className:"mt-4 grid grid-cols-1 gap-3",children:[(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Your name",value:o,onChange:e=>c(e.target.value)}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Starting address",value:m,onChange:e=>u(e.target.value),onFocus:()=>S.length>0&&M(!0),onKeyDown:e=>{A&&("ArrowDown"===e.key&&(e.preventDefault(),I(e=>Math.min(e+1,S.length-1))),"ArrowUp"===e.key&&(e.preventDefault(),I(e=>Math.max(e-1,0))),"Enter"===e.key&&P>=0&&P<S.length&&(e.preventDefault(),O(S[P])),"Escape"===e.key&&M(!1))}}),A&&S.length>0&&(0,n.jsx)("div",{className:"absolute z-20 mt-1 w-full max-h-64 overflow-auto rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-lg",children:S.map((e,t)=>(0,n.jsx)("button",{type:"button",onClick:()=>O(e),className:"block w-full text-left px-3 py-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 ".concat(t===P?"bg-zinc-50 dark:bg-zinc-800":""),children:r(e.label)||e.label},e.id))})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Arrival date",value:v,onChange:e=>y(e.target.value)}),(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Departure date",value:j,onChange:e=>N(e.target.value)})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",onClick:()=>k(!1),disabled:p,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:p,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:p?"Adding…":"Join"})]})]})]})]}),z&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>h?null:C(null)}),(0,n.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"remove-attendee-title",className:"relative z-[1001] w-[92%] max-w-sm rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{id:"remove-attendee-title",className:"text-base font-semibold",children:"Remove attendee?"}),(0,n.jsxs)("p",{className:"mt-2 text-sm opacity-80",children:["Are you sure you want to remove ",(0,n.jsx)("span",{className:"font-medium",children:z.name}),"? This action cannot be undone."]}),(0,n.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>C(null),disabled:!!h,children:"Cancel"}),(0,n.jsx)("button",{type:"button",className:"rounded-md px-3 py-1.5 text-sm text-white ".concat(h?"bg-rose-500 opacity-70 cursor-not-allowed":"bg-rose-600 hover:bg-rose-500"),onClick:()=>U(z.id),disabled:!!h,children:h?"Removing…":"Remove"})]})]})]})]})}function c(e,t){var a,n,s,i;e.map(e=>[e.id,e]);let r={totalSpend:0,perAttendeeOwes:new Map,perAttendeePaid:new Map};for(let t of e)r.perAttendeeOwes.set(t.id,0),r.perAttendeePaid.set(t.id,0);for(let s of t){r.totalSpend+=s.amount;let t=s.beneficiaryIds.length>0?s.beneficiaryIds:e.map(e=>e.id),i=t.length>0?s.amount/t.length:0;for(let e of(r.perAttendeePaid.set(s.payerId,(null!=(a=r.perAttendeePaid.get(s.payerId))?a:0)+s.amount),t))r.perAttendeeOwes.set(e,(null!=(n=r.perAttendeeOwes.get(e))?n:0)+i)}let l=new Map;for(let t of e){let e=null!=(s=r.perAttendeeOwes.get(t.id))?s:0,a=null!=(i=r.perAttendeePaid.get(t.id))?i:0;l.set(t.id,+(e-a).toFixed(2))}return{...r,perAttendeeNet:l}}let m=e=>fetch(e).then(e=>e.json());function u(){let{data:e=[],isLoading:t}=(0,i.Ay)("/api/attendees",m),{data:a=[],mutate:r,isLoading:l}=(0,i.Ay)("/api/expenses",m),[d,o]=(0,s.useState)(""),[u,p]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[b,g]=(0,s.useState)([]),[f,v]=(0,s.useState)(()=>new Date().toISOString().slice(0,10)),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1);async function k(t){if(t.preventDefault(),d.trim()&&u&&x){j(!0);try{var a;await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:d,amount:Number(u),payerId:x,beneficiaryIds:b,date:f})}),o(""),p(""),v(new Date().toISOString().slice(0,10)),h((null==(a=e[0])?void 0:a.id)||""),g(e.map(e=>e.id)),r(),w(!1)}finally{j(!1)}}}async function z(e,t){await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:e,beneficiaryId:t})}),r()}return(0,s.useEffect)(()=>{let t=e.map(e=>e.id);(t.length!==b.length||t.some(e=>!b.includes(e)))&&g(t),!x&&e.length>0&&h(e[0].id)},[e]),(0,s.useMemo)(()=>c(e,a),[e,a]),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Expenses"}),(0,n.jsx)("button",{type:"button",onClick:()=>w(!0),className:"text-xs rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5",children:"Add Expense"})]}),N&&(0,n.jsxs)("div",{className:"fixed inset-0 z-30 flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!y&&w(!1)}),(0,n.jsxs)("div",{className:"relative z-40 w-[92%] max-w-md rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-xl p-5",children:[(0,n.jsx)("h4",{className:"text-base font-semibold",children:"Add expense"}),(0,n.jsxs)("form",{onSubmit:k,className:"mt-4 grid grid-cols-1 gap-3",children:[(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"Description",value:d,onChange:e=>o(e.target.value)}),(0,n.jsx)("input",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",placeholder:"$0.00",inputMode:"decimal",value:u,onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").split(".");p(t.length>1?"".concat(t[0],".").concat(t[1].slice(0,2)):t[0])},onBlur:()=>{if(!u)return;let e=Number(u);isNaN(e)||p(e.toFixed(2))}}),(0,n.jsx)("input",{type:"date",className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:f,onChange:e=>v(e.target.value)}),(0,n.jsxs)("select",{className:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2",value:x,onChange:e=>h(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Payer"}),e.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsx)("div",{className:"text-xs opacity-70",children:"This expense applies to these people:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 items-center",children:e.map(e=>{let t=b.includes(e.id);return(0,n.jsx)("button",{type:"button",onClick:()=>g(a=>t?a.filter(t=>t!==e.id):[...a,e.id]),className:"text-sm rounded-full px-3 py-1 border ".concat(t?"bg-indigo-600 text-white border-indigo-600":"border-zinc-300 dark:border-zinc-700"),children:e.name},e.id)})}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded-md border border-zinc-300 dark:border-zinc-700 px-3 py-1.5 text-sm",onClick:()=>w(!1),disabled:y,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:y,className:"rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-3 py-1.5 text-sm",children:y?"Adding…":"Add expense"})]})]})]})]}),(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[(t||l)&&(0,n.jsx)("div",{className:"text-sm opacity-70",children:"Loading…"}),0===a.length&&(0,n.jsx)("div",{className:"text-sm opacity-70",children:"No expenses yet"}),a.map(t=>{var a;let s=e.filter(e=>t.beneficiaryIds.includes(e.id)),i=s.length?t.amount/s.length:0;return(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-200 dark:border-zinc-800 p-4",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("div",{className:"font-medium break-words",children:t.description}),(0,n.jsxs)("div",{className:"mt-1 text-xl font-semibold tabular-nums",children:["$",t.amount.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-80",children:[(0,n.jsxs)("div",{children:["Payer: ",(null==(a=e.find(e=>e.id===t.payerId))?void 0:a.name)||"Unknown"]}),(0,n.jsx)("button",{type:"button",onClick:async()=>{await fetch("/api/expenses?id=".concat(encodeURIComponent(t.id)),{method:"DELETE"}),r()},className:"rounded-md border border-rose-300 text-rose-700 dark:border-rose-800 dark:text-rose-300 px-2 py-1 text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20",title:"Delete expense","aria-label":"Delete expense",children:"\uD83D\uDDD1️"})]}),t.date&&(0,n.jsx)("div",{className:"text-xs opacity-70",children:t.date})]})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-xs opacity-70",children:"Applies to:"}),(0,n.jsx)("button",{type:"button",onClick:async()=>{let a=e.map(e=>e.id);await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:t.id,beneficiaryIds:a})}),r()},className:"rounded-full bg-emerald-600 hover:bg-emerald-500 text-white h-6 w-6 flex items-center justify-center text-sm",title:"Add people","aria-label":"Add people",children:"+"})]}),(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map(e=>(0,n.jsxs)("div",{className:"text-xs rounded-full px-2 py-1 border border-zinc-300 dark:border-zinc-700 flex items-center gap-1",children:[(0,n.jsx)("button",{type:"button",onClick:()=>z(t.id,e.id),className:"h-5 w-5 flex items-center justify-center rounded-full ".concat(t.paidByBeneficiary[e.id]?"bg-emerald-600 text-white":"bg-zinc-100 dark:bg-zinc-800"),title:"Mark ".concat(e.name," ").concat(t.paidByBeneficiary[e.id]?"unpaid":"paid"," (share $").concat(i.toFixed(2),")"),children:t.paidByBeneficiary[e.id]?"✓":""}),(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("button",{type:"button",onClick:async()=>{let a=t.beneficiaryIds.filter(t=>t!==e.id);await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenseId:t.id,beneficiaryIds:a})}),r()},className:"ml-1 rounded-full border border-rose-300 text-rose-700 dark:border-rose-700 dark:text-rose-300 h-5 w-5 flex items-center justify-center hover:bg-rose-50 dark:hover:bg-rose-900/20","aria-label":"Remove ".concat(e.name),title:"Remove ".concat(e.name),children:"\xd7"})]},e.id))})]})]},t.id)})]})]})}let p=e=>fetch(e).then(e=>e.json());function x(){let{data:e=[]}=(0,i.Ay)("/api/attendees",p),{data:t=[]}=(0,i.Ay)("/api/expenses",p),a=c(e,t);return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Total Spend"}),(0,n.jsxs)("div",{className:"mt-2 text-2xl font-bold",children:["$",a.totalSpend.toFixed(2)]}),(0,n.jsx)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:e.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 dark:border-zinc-700 px-3 py-2",children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"opacity-70 mr-2",children:"net"}),(0,n.jsxs)("span",{className:a.perAttendeeNet.get(e.id)>0?"text-amber-600":"text-emerald-600",children:["$",Math.abs(a.perAttendeeNet.get(e.id)).toFixed(2)," ",a.perAttendeeNet.get(e.id)>0?"owes":"owed"]})]})]},e.id))})]})}a(8413);var h=a(5028);async function b(e){try{let t=new URL("https://nominatim.openstreetmap.org/search");t.searchParams.set("q",e),t.searchParams.set("format","json"),t.searchParams.set("limit","1");let a=await fetch(t.toString(),{headers:{"User-Agent":l.eE,"Accept-Language":"en"},cache:"no-store"});if(!a.ok)return null;let n=await a.json();if(!(null==n?void 0:n.length))return null;return{lat:Number(n[0].lat),lng:Number(n[0].lon)}}catch(e){return null}}async function g(){return b(l.Ub)}let f=(0,h.default)(()=>Promise.all([a.e(761),a.e(712)]).then(a.bind(a,9712)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),v=(0,h.default)(()=>Promise.all([a.e(761),a.e(712)]).then(a.bind(a,9712)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),y=(0,h.default)(()=>Promise.all([a.e(761),a.e(712)]).then(a.bind(a,9712)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),j=(0,h.default)(()=>Promise.all([a.e(761),a.e(712)]).then(a.bind(a,9712)).then(e=>e.Polyline),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),N=(0,h.default)(()=>Promise.all([a.e(761),a.e(712)]).then(a.bind(a,9712)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),w=e=>fetch(e).then(e=>e.json());function k(){let{data:e=[]}=(0,i.Ay)("/api/attendees",w),[t,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[m,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a.e(761).then(a.t.bind(a,5752,23)).then(e=>{let{default:t}=e;t.Icon.Default.mergeOptions({iconRetinaUrl:"/leaflet/marker-icon-2x.png",iconUrl:"/leaflet/marker-icon.png",shadowUrl:"/leaflet/marker-shadow.png"}),c(t.divIcon({html:'<div style="font-size:24px; line-height:1; color:#eab308; text-shadow:0 1px 2px rgba(0,0,0,.6)">★</div>',className:"house-star-icon",iconSize:[24,24],iconAnchor:[12,18],popupAnchor:[0,-18]}))}).catch(()=>{})},[]),(0,s.useEffect)(()=>{g().then(d)},[]),(0,s.useEffect)(()=>{u(!0)},[]);let p=(0,s.useMemo)(()=>{let a=[t,...e.map(e=>e.location).filter(Boolean)].filter(Boolean);if(!a.length)return;let n=a.map(e=>e.lat),s=a.map(e=>e.lng);return[[Math.min(...n),Math.min(...s)],[Math.max(...n),Math.max(...s)]]},[e,t]);return(0,n.jsx)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden shadow-sm relative z-10",children:(0,n.jsx)("div",{className:"h-[420px] w-full",children:m&&(0,n.jsxs)(f,{bounds:p,center:t?[t.lat,t.lng]:[40.75,-73.98],zoom:6,style:{height:"100%",width:"100%"},children:[(0,n.jsx)(v,{attribution:"\xa9 OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&(0,n.jsx)(y,{position:[t.lat,t.lng],icon:o||void 0,children:(0,n.jsxs)(N,{children:[(0,n.jsx)("div",{className:"font-medium mb-1",children:"Man Weekend House"}),(0,n.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(l.Ub)),target:"_blank",rel:"noreferrer",className:"text-xs text-indigo-700 dark:text-indigo-300 hover:underline break-words",children:l.Ub})]})}),e.map(e=>e.location?(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{position:[e.location.lat,e.location.lng],children:(0,n.jsxs)(N,{children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)("div",{className:"text-xs opacity-70 max-w-[180px]",children:r(e.startingAddress)})]})}),t&&(0,n.jsx)(j,{positions:[[e.location.lat,e.location.lng],[t.lat,t.lng]],pathOptions:{color:"#6366f1",weight:3,opacity:.8}})]},e.id):null)]})})})}var z=a(6766),C=a(9982),S=a(2348);let D={1:"bulbasaur",2:"ivysaur",3:"venusaur",4:"charmander",5:"charmeleon",6:"charizard",7:"squirtle",8:"wartortle",9:"blastoise",10:"caterpie",11:"metapod",12:"butterfree",13:"weedle",14:"kakuna",15:"beedrill",16:"pidgey",17:"pidgeotto",18:"pidgeot",19:"rattata",20:"raticate",21:"spearow",22:"fearow",23:"ekans",24:"arbok",25:"pikachu",26:"raichu",27:"sandshrew",28:"sandslash",29:"nidoran-f",30:"nidorina",31:"nidoqueen",32:"nidoran-m",33:"nidorino",34:"nidoking",35:"clefairy",36:"clefable",37:"vulpix",38:"ninetales",39:"jigglypuff",40:"wigglytuff",41:"zubat",42:"golbat",43:"oddish",44:"gloom",45:"vileplume",46:"paras",47:"parasect",48:"venonat",49:"venomoth",50:"diglett"},A="pokemon-cache-v1";function M(){try{let e=localStorage.getItem(A);return e?JSON.parse(e):{}}catch(e){return{}}}function P(e){try{localStorage.setItem(A,JSON.stringify(e))}catch(e){}}async function I(e){if(e<1||e>365)return null;let t=M();if(t[e])return t[e];let a=D[e]||"#".concat(e);try{var n,s,i,r,l;let d=await fetch("https://pokeapi.co/api/v2/pokemon-species/".concat(e,"/"),{cache:"force-cache"});if(!d.ok)throw Error("http");let o=await d.json(),c=((null==(s=o.names)||null==(n=s.find(e=>{var t;return(null==(t=e.language)?void 0:t.name)==="en"}))?void 0:n.name)||a).toLowerCase(),m=null==(l=o.flavor_text_entries)||null==(r=l.find(e=>{var t;return(null==(t=e.language)?void 0:t.name)==="en"}))||null==(i=r.flavor_text)?void 0:i.replace(/\f/g," "),u={id:e,name:c,flavor_text:m};return t[e]=u,P(t),u}catch(s){let n={id:e,name:a};return t[e]=n,P(t),n}}function E(){let e=Math.max(0,(0,C.m)(new Date(l.Nn),new Date)),t=Math.max(0,e-1),a=function(e){let[t,a]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let t=!1;return async function(){if(!e||e<1)return a(null);let n=function(e){let t=M();return t[e]?t[e]:D[e]?{id:e,name:D[e]}:null}(e);n&&!t&&a(n);let s=await I(e);t||a(s)}(),()=>{t=!0}},[e]),t}(0===t?25:t);return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Pok\xe9mon of the Day"}),(0,n.jsxs)("div",{className:"text-sm opacity-70",children:[e," day",1===e?"":"s"," to ",(0,S.GP)(new Date(l.Nn),"MMM d")]})]}),a?(0,n.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,n.jsx)("div",{className:"relative h-32 w-32 shrink-0",children:(0,n.jsx)(z.default,{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(a.id,".png"),alt:a.name,fill:!0,sizes:"128px",className:"object-contain"})}),(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsxs)("div",{className:"text-xl font-semibold capitalize",children:["#",a.id," • ",a.name.replace("-"," ")]}),(0,n.jsx)("p",{className:"mt-2 text-sm opacity-80 line-clamp-4",children:a.flavor_text||"A mysterious Pok\xe9mon appears as we count down to the trip!"})]})]}):(0,n.jsx)("div",{className:"mt-4 text-sm opacity-70",children:"No Pok\xe9mon today. Rest up for the trip!"})]})}function O(){let[e,t]=(0,s.useState)("planning");return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,n.jsx)(T,{label:"Planning",active:"planning"===e,onClick:()=>t("planning")}),(0,n.jsx)(T,{label:"Weekend Of",active:"weekend"===e,onClick:()=>t("weekend")}),(0,n.jsx)(T,{label:"The Bill",active:"bill"===e,onClick:()=>t("bill")})]})}),"planning"===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(E,{}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsx)(o,{}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(k,{})})]})]}),"weekend"===e&&(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-sm bg-white dark:bg-zinc-900",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Weekend Of"}),(0,n.jsx)("p",{className:"mt-2 text-sm opacity-70",children:"Add schedule, tasks, and logistics here."})]}),"bill"===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(u,{}),(0,n.jsx)(x,{})]})]})}function T(e){let{label:t,active:a,onClick:s}=e;return(0,n.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 md:px-5 md:py-2.5 text-sm md:text-base rounded-full transition-colors ".concat(a?"bg-indigo-600 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 hover:bg-zinc-200 dark:hover:bg-zinc-700"),"aria-current":a?"page":void 0,children:t})}},1950:(e,t,a)=>{"use strict";a.d(t,{MI:()=>m,NG:()=>d,Nn:()=>s,PJ:()=>c,QV:()=>r,Ub:()=>l,W5:()=>i,eE:()=>o});var n=a(9509);let s="2025-09-11T00:00:00-04:00",i="2025-09-15T23:59:59-04:00",r="Man Weekend 2025",l="15 Goldring Drive, Highland Lake, NY 12743",d="https://www.airbnb.com/rooms/880325538027550159?viralityEntryPoint=1&s=76",o=void 0!==n&&n.env.NEXT_PUBLIC_APP_NAME||"man-weekend-dashboard/1.0 (+https://example.com)",c="2025-09-11",m="2025-09-14"},9009:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var n=a(5155),s=a(1950),i=a(6766),r=a(958),l=a(2348),d=a(2115);function o(){let[e,t]=(0,d.useState)(()=>new Date);(0,d.useEffect)(()=>{let e=setInterval(()=>t(new Date),1e3);return()=>clearInterval(e)},[]);let a=(0,d.useMemo)(()=>new Date(s.Nn),[]),o=(0,d.useMemo)(()=>new Date(s.W5),[]),c=Math.max(0,(0,r.O)(a,e));(0,r.O)(o,e);let m=function(e){let t=Math.floor(e/86400),a=Math.floor((e-=24*t*3600)/3600),n=Math.floor((e-=3600*a)/60),s=e-60*n;return{days:t,hours:a,minutes:n,seconds:s}}(c);return(0,n.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden shadow-lg bg-white dark:bg-zinc-900",children:[(0,n.jsxs)("div",{className:"relative h-40 md:h-56 w-full",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-fuchsia-600"}),(0,n.jsx)(i.default,{src:"/house-hero.jpg",alt:"Trip hero",fill:!0,priority:!0,sizes:"100vw",className:"absolute inset-0 h-full w-full object-cover"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,n.jsxs)("div",{className:"absolute inset-x-0 bottom-0 p-4 flex items-end justify-between text-white gap-3",children:[(0,n.jsx)("h2",{className:"text-4xl md:text-6xl font-light md:font-normal leading-tight tracking-tight drop-shadow-[0_2px_10px_rgba(0,0,0,0.55)] text-transparent bg-clip-text bg-gradient-to-r from-indigo-100 via-fuchsia-100 to-pink-100",children:s.QV}),(0,n.jsx)("a",{href:s.NG,target:"_blank",rel:"noreferrer",className:"text-xs md:text-sm bg-white/20 hover:bg-white/30 backdrop-blur rounded-md px-2 py-1 whitespace-nowrap",children:"View Airbnb"})]})]}),(0,n.jsxs)("div",{className:"px-6 pb-6 pt-4",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-zinc-900 dark:text-zinc-50",children:[(0,n.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-zinc-100 dark:bg-zinc-800 px-3 py-1.5 text-xs md:text-sm",children:[(0,n.jsx)("span",{"aria-hidden":!0,children:"\uD83D\uDCC5"}),(0,l.GP)(a,"MMM d, yyyy")," → ",(0,l.GP)(o,"MMM d, yyyy")]}),(0,n.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(s.Ub)),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-200 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 px-3 py-1.5 text-xs md:text-sm break-words",children:[(0,n.jsx)("span",{"aria-hidden":!0,children:"\uD83D\uDCCD"}),s.Ub]})]}),(0,n.jsx)("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3 text-center",children:["Days","Hours","Minutes","Seconds"].map((e,t)=>{let a=[m.days,m.hours,m.minutes,m.seconds][t];return(0,n.jsxs)("div",{className:"rounded-xl bg-zinc-50 dark:bg-white/10 backdrop-blur px-3 py-4",children:[(0,n.jsx)("div",{className:"text-3xl font-bold tabular-nums",children:a}),(0,n.jsx)("div",{className:"text-xs uppercase tracking-wide opacity-70",children:e})]},e)})})]})]})}}},e=>{e.O(0,[484,482,441,964,358],()=>e(e.s=594)),_N_E=e.O()}]);